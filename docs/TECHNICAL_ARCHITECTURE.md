# ğŸ—ï¸ LearnSphere Technical Architecture

## ğŸ“‹ Architecture Overview

LearnSphere follows a modern three-tier architecture with clear separation of concerns, ensuring scalability, maintainability, and performance.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESENTATION LAYER                       â”‚
â”‚                    (React Frontend)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚   Student   â”‚ â”‚   Teacher   â”‚ â”‚    Admin    â”‚            â”‚
â”‚  â”‚  Dashboard  â”‚ â”‚  Dashboard  â”‚ â”‚  Dashboard  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APPLICATION LAYER                      â”‚
â”‚                   (FastAPI Backend)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚    Auth     â”‚ â”‚   Course    â”‚ â”‚ Notificationâ”‚          â”‚
â”‚  â”‚   Service   â”‚ â”‚  Service    â”‚ â”‚   Service   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Assessment â”‚ â”‚    File     â”‚ â”‚   Payment   â”‚          â”‚
â”‚  â”‚   Service   â”‚ â”‚  Service    â”‚ â”‚   Service   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”
â”‚                      DATA LAYER                           â”‚
â”‚                   (Supabase/PostgreSQL)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Database   â”‚ â”‚   Storage   â”‚ â”‚  Real-time  â”‚          â”‚
â”‚  â”‚  (PostgreSQLâ”‚ â”‚ (Supabase   â”‚ â”‚ (WebSocket) â”‚          â”‚
â”‚  â”‚             â”‚ â”‚  Storage)   â”‚ â”‚             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Frontend Architecture

### **React Application Structure**

```
frontend/src/
â”œâ”€â”€ ğŸ“ components/              # Reusable UI Components
â”‚   â”œâ”€â”€ ğŸ“„ DashboardLayout.jsx          # Main dashboard wrapper
â”‚   â”œâ”€â”€ ğŸ“„ NotificationBell.jsx         # Notification system UI
â”‚   â”œâ”€â”€ ğŸ“„ CourseThumbnail.jsx          # Course image display
â”‚   â”œâ”€â”€ ğŸ“„ FileUpload.jsx               # File upload component
â”‚   â””â”€â”€ ğŸ“„ LoadingSpinner.jsx           # Loading states
â”œâ”€â”€ ğŸ“ pages/                   # Page-level Components
â”‚   â”œâ”€â”€ ğŸ“ student/             # Student-specific pages
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Dashboard.jsx            # Student dashboard
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AllCourses.jsx           # Course catalog
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ MyCourses.jsx            # Enrolled courses
â”‚   â”‚   â””â”€â”€ ğŸ“„ Profile.jsx              # Student profile
â”‚   â”œâ”€â”€ ğŸ“ teacher/             # Teacher-specific pages
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ TeacherDashboard.jsx     # Teacher dashboard
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CreateCourse.jsx         # Course creation
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ManageCourses.jsx        # Course management
â”‚   â”‚   â””â”€â”€ ğŸ“„ Analytics.jsx            # Teacher analytics
â”‚   â””â”€â”€ ğŸ“ admin/               # Admin-specific pages
â”‚       â”œâ”€â”€ ğŸ“„ AdminDashboard.jsx       # Admin dashboard
â”‚       â”œâ”€â”€ ğŸ“„ UserManagement.jsx       # User management
â”‚       â””â”€â”€ ğŸ“„ SystemSettings.jsx       # System configuration
â”œâ”€â”€ ğŸ“ contexts/                # React Context Providers
â”‚   â”œâ”€â”€ ğŸ“„ AuthContext.jsx              # Authentication state
â”‚   â”œâ”€â”€ ğŸ“„ NotificationContext.jsx      # Notification state
â”‚   â””â”€â”€ ğŸ“„ ThemeContext.jsx             # Theme management
â”œâ”€â”€ ğŸ“ hooks/                   # Custom React Hooks
â”‚   â”œâ”€â”€ ğŸ“„ useAuth.js                   # Authentication hook
â”‚   â”œâ”€â”€ ğŸ“„ useNotifications.js          # Notification hook
â”‚   â””â”€â”€ ğŸ“„ useApi.js                    # API interaction hook
â”œâ”€â”€ ğŸ“ utils/                   # Utility Functions
â”‚   â”œâ”€â”€ ğŸ“„ api.js                       # API client configuration
â”‚   â”œâ”€â”€ ğŸ“„ thumbnailUtils.jsx           # Image handling utilities
â”‚   â”œâ”€â”€ ğŸ“„ fileUtils.js                 # File handling utilities
â”‚   â””â”€â”€ ğŸ“„ validation.js                # Form validation
â”œâ”€â”€ ğŸ“ services/                # Service Layer
â”‚   â”œâ”€â”€ ğŸ“„ authService.js               # Authentication service
â”‚   â”œâ”€â”€ ğŸ“„ courseService.js             # Course management service
â”‚   â”œâ”€â”€ ğŸ“„ notificationService.js       # Notification service
â”‚   â””â”€â”€ ğŸ“„ fileService.js               # File upload service
â””â”€â”€ ğŸ“ styles/                  # Styling
    â”œâ”€â”€ ğŸ“„ globals.css                  # Global styles
    â”œâ”€â”€ ğŸ“„ components.css               # Component styles
    â””â”€â”€ ğŸ“„ utilities.css                # Utility classes
```

### **State Management Architecture**

```javascript
// Context-based state management
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AuthContext   â”‚    â”‚NotificationContextâ”‚   â”‚  ThemeContext   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ user state    â”‚    â”‚ â€¢ notifications â”‚    â”‚ â€¢ theme state   â”‚
â”‚ â€¢ login/logout  â”‚    â”‚ â€¢ preferences   â”‚    â”‚ â€¢ dark/light    â”‚
â”‚ â€¢ permissions   â”‚    â”‚ â€¢ real-time     â”‚    â”‚ â€¢ colors        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Components    â”‚
                    â”‚                 â”‚
                    â”‚ â€¢ Dashboard     â”‚
                    â”‚ â€¢ Course Pages  â”‚
                    â”‚ â€¢ Notifications â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Component Design Patterns**

#### **1. Container/Presentational Pattern**

```javascript
// Container Component (Smart)
const CourseContainer = () => {
  const [courses, setCourses] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    fetchCourses()
      .then(setCourses)
      .finally(() => setLoading(false));
  }, []);

  return <CourseList courses={courses} loading={loading} />;
};

// Presentational Component (Dumb)
const CourseList = ({ courses, loading }) => {
  if (loading) return <LoadingSpinner />;
  return (
    <div className="course-grid">
      {courses.map((course) => (
        <CourseCard key={course.id} course={course} />
      ))}
    </div>
  );
};
```

#### **2. Custom Hooks Pattern**

```javascript
// Custom hook for course management
const useCourses = () => {
  const [courses, setCourses] = useState([]);
  const [loading, setLoading] = useState(false);

  const fetchCourses = async () => {
    setLoading(true);
    try {
      const data = await courseService.getCourses();
      setCourses(data);
    } catch (error) {
      console.error("Failed to fetch courses:", error);
    } finally {
      setLoading(false);
    }
  };

  return { courses, loading, fetchCourses };
};
```

---

## âš™ï¸ Backend Architecture

### **FastAPI Application Structure**

```
backend/
â”œâ”€â”€ ğŸ“„ main.py                      # Application entry point
â”œâ”€â”€ ğŸ“ api/                         # API Route Modules
â”‚   â”œâ”€â”€ ğŸ“„ auth_api.py              # Authentication endpoints
â”‚   â”œâ”€â”€ ğŸ“„ course_api.py            # Course management
â”‚   â”œâ”€â”€ ğŸ“„ enrollment_api.py        # Enrollment system
â”‚   â”œâ”€â”€ ğŸ“„ notifications_api.py     # Notification system
â”‚   â”œâ”€â”€ ğŸ“„ course_materials_enhanced.py # File upload system
â”‚   â”œâ”€â”€ ğŸ“„ course_completion_api.py # Progress tracking
â”‚   â”œâ”€â”€ ğŸ“„ quiz_api.py              # Assessment system
â”‚   â”œâ”€â”€ ğŸ“„ assignments_api.py       # Assignment management
â”‚   â”œâ”€â”€ ğŸ“„ payment_system.py        # Payment processing
â”‚   â”œâ”€â”€ ğŸ“„ admin_api.py             # Admin functionality
â”‚   â””â”€â”€ ğŸ“„ user_management_api.py   # User management
â”œâ”€â”€ ğŸ“ models/                      # Pydantic Data Models
â”‚   â”œâ”€â”€ ğŸ“„ auth_models.py           # Authentication models
â”‚   â”œâ”€â”€ ğŸ“„ course_models.py         # Course data models
â”‚   â”œâ”€â”€ ğŸ“„ user_models.py           # User data models
â”‚   â””â”€â”€ ğŸ“„ notification_models.py   # Notification models
â”œâ”€â”€ ğŸ“ middleware/                  # Custom Middleware
â”‚   â”œâ”€â”€ ğŸ“„ auth_middleware.py       # Authentication middleware
â”‚   â”œâ”€â”€ ğŸ“„ cors_middleware.py       # CORS configuration
â”‚   â””â”€â”€ ğŸ“„ logging_middleware.py    # Request logging
â”œâ”€â”€ ğŸ“ services/                    # Business Logic Services
â”‚   â”œâ”€â”€ ğŸ“„ auth_service.py          # Authentication logic
â”‚   â”œâ”€â”€ ğŸ“„ course_service.py        # Course business logic
â”‚   â”œâ”€â”€ ğŸ“„ notification_service.py  # Notification logic
â”‚   â”œâ”€â”€ ğŸ“„ file_service.py          # File handling logic
â”‚   â””â”€â”€ ğŸ“„ email_service.py         # Email delivery service
â”œâ”€â”€ ğŸ“ utils/                       # Utility Functions
â”‚   â”œâ”€â”€ ğŸ“„ database.py              # Database utilities
â”‚   â”œâ”€â”€ ğŸ“„ security.py              # Security utilities
â”‚   â”œâ”€â”€ ğŸ“„ file_utils.py            # File handling utilities
â”‚   â””â”€â”€ ğŸ“„ validation.py            # Data validation
â””â”€â”€ ğŸ“ config/                      # Configuration
    â”œâ”€â”€ ğŸ“„ settings.py              # Application settings
    â”œâ”€â”€ ğŸ“„ database_config.py       # Database configuration
    â””â”€â”€ ğŸ“„ email_config.py          # Email configuration
```

### **API Layer Architecture**

```python
# API Router Structure
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Application                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Middleware Layer                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚    CORS     â”‚ â”‚    Auth     â”‚ â”‚   Logging   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Middleware  â”‚ â”‚ Middleware  â”‚ â”‚ Middleware  â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  Router Layer                       â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚   Auth      â”‚ â”‚   Course    â”‚ â”‚Notification â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Router     â”‚ â”‚  Router     â”‚ â”‚   Router    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Assessment  â”‚ â”‚    File     â”‚ â”‚   Payment   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚   Router    â”‚ â”‚   Router    â”‚ â”‚   Router    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Service Layer Pattern**

```python
# Service Layer Example
class CourseService:
    def __init__(self, db: SupabaseClient):
        self.db = db

    async def create_course(self, course_data: CourseCreate) -> Course:
        # Business logic validation
        if not course_data.title:
            raise ValueError("Course title is required")

        # Database operation
        result = self.db.table("courses").insert(course_data.dict()).execute()

        # Post-processing
        course = Course(**result.data[0])
        await self._send_course_created_notification(course)

        return course

    async def _send_course_created_notification(self, course: Course):
        # Notification logic
        pass

# API Endpoint
@router.post("/courses/", response_model=Course)
async def create_course(
    course_data: CourseCreate,
    current_user: dict = Depends(get_current_user),
    course_service: CourseService = Depends(get_course_service)
):
    return await course_service.create_course(course_data)
```

---

## ğŸ—„ï¸ Database Architecture

### **PostgreSQL Schema Design**

```sql
-- Core Tables Structure
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Database Schema                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                User Management                      â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚  profiles   â”‚ â”‚ auth_users  â”‚ â”‚   roles     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚             â”‚ â”‚ (Supabase)  â”‚ â”‚             â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Course Management                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚   courses   â”‚ â”‚enrollments  â”‚ â”‚course_progressâ”‚   â”‚    â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Content Management                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚course_materialsâ”‚assignments â”‚ â”‚   quizzes   â”‚    â”‚    â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Notification System                  â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚notificationsâ”‚ â”‚notification_â”‚ â”‚email_notificationsâ”‚   â”‚    â”‚
â”‚  â”‚  â”‚             â”‚ â”‚preferences  â”‚ â”‚             â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Database Relationships**

```sql
-- Entity Relationship Diagram
profiles (1) â”€â”€â”€â”€â”€â”€â”€â”€ (n) courses
    â”‚                      â”‚
    â”‚                      â”‚
    â”‚                      â”‚
    â”‚                      â”‚
    â”‚                      â”‚
enrollments (n) â”€â”€â”€â”€â”€â”€ (1) courses
    â”‚
    â”‚
    â”‚
course_progress (1) â”€â”€â”€â”€ (1) enrollments

courses (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (n) course_materials
courses (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (n) assignments
courses (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (n) quizzes

profiles (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (n) notifications
profiles (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (n) notification_preferences
```

### **Database Optimization**

#### **Indexing Strategy**

```sql
-- Performance Indexes
CREATE INDEX idx_courses_teacher_id ON courses(teacher_id);
CREATE INDEX idx_courses_category ON courses(category);
CREATE INDEX idx_courses_status ON courses(status);
CREATE INDEX idx_enrollments_student_id ON enrollments(student_id);
CREATE INDEX idx_enrollments_course_id ON enrollments(course_id);
CREATE INDEX idx_notifications_user_id ON notifications(user_id);
CREATE INDEX idx_notifications_created_at ON notifications(created_at);
CREATE INDEX idx_course_materials_course_id ON course_materials(course_id);
```

#### **Row Level Security (RLS)**

```sql
-- Security Policies
CREATE POLICY "Users can view their own profile"
ON profiles FOR SELECT
USING (auth.uid() = id);

CREATE POLICY "Teachers can manage their own courses"
ON courses FOR ALL
USING (auth.uid() = teacher_id);

CREATE POLICY "Students can view enrolled courses"
ON courses FOR SELECT
USING (id IN (
    SELECT course_id FROM enrollments
    WHERE student_id = auth.uid()
));
```

---

## ğŸ”„ Data Flow Architecture

### **Request Flow Diagram**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚â”€â”€â”€â–ºâ”‚   FastAPI   â”‚â”€â”€â”€â–ºâ”‚  Supabase   â”‚â”€â”€â”€â–ºâ”‚ PostgreSQL  â”‚
â”‚  (React)    â”‚    â”‚   Server    â”‚    â”‚   API       â”‚    â”‚  Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User     â”‚    â”‚ 2. Auth     â”‚    â”‚ 3. Query    â”‚    â”‚ 4. Data     â”‚
â”‚ Interaction â”‚    â”‚ Validation  â”‚    â”‚ Processing  â”‚    â”‚ Retrieval   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                   â”‚                   â”‚                   â”‚
       â”‚                   â”‚                   â”‚                   â”‚
       â–¼                   â–¼                   â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. UI       â”‚â—„â”€â”€â”€â”‚ 7. Response â”‚â—„â”€â”€â”€â”‚ 6. Data     â”‚â—„â”€â”€â”€â”‚ 5. Result   â”‚
â”‚ Update      â”‚    â”‚ Processing  â”‚    â”‚ Formatting  â”‚    â”‚ Processing  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Real-time Data Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Real-time Updates                       â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ PostgreSQL  â”‚â”€â”€â”€â–ºâ”‚  Supabase   â”‚â”€â”€â”€â–ºâ”‚   FastAPI   â”‚    â”‚
â”‚  â”‚  Database   â”‚    â”‚  Realtime   â”‚    â”‚  WebSocket  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Data Change â”‚    â”‚ Event       â”‚    â”‚ Real-time   â”‚    â”‚
â”‚  â”‚ Trigger     â”‚    â”‚ Broadcastingâ”‚    â”‚ Notificationâ”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Client    â”‚â—„â”€â”€â”€â”‚  WebSocket  â”‚â—„â”€â”€â”€â”‚  Supabase   â”‚    â”‚
â”‚  â”‚  (React)    â”‚    â”‚ Connection  â”‚    â”‚  Client     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

### **Authentication Flow**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Authentication Architecture                  â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Client    â”‚    â”‚   FastAPI   â”‚    â”‚  Supabase   â”‚    â”‚
â”‚  â”‚  (React)    â”‚    â”‚   Server    â”‚    â”‚    Auth     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚ 1. Login Request  â”‚                   â”‚          â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚ 2. Auth Request   â”‚          â”‚
â”‚         â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚ 3. JWT Token      â”‚          â”‚
â”‚         â”‚                   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚         â”‚ 4. JWT + Refresh  â”‚                   â”‚          â”‚
â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚ 5. Store Tokens   â”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚ 6. API Requests   â”‚                   â”‚          â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚ 7. Token Validationâ”‚         â”‚
â”‚         â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚ 8. Valid Response â”‚                   â”‚          â”‚
â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Security Layers**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Application Layer                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Input       â”‚ â”‚ Business    â”‚ â”‚ Output      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Validation  â”‚ â”‚ Logic       â”‚ â”‚ Sanitizationâ”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Middleware Layer                     â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ CORS        â”‚ â”‚ Auth        â”‚ â”‚ Rate        â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Protection  â”‚ â”‚ Middleware  â”‚ â”‚ Limiting    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                Database Layer                       â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ Row Level   â”‚ â”‚ Encryption  â”‚ â”‚ Audit       â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Security    â”‚ â”‚ at Rest     â”‚ â”‚ Logging     â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Performance Architecture

### **Optimization Strategies**

#### **1. Lazy Loading**

```python
# Backend lazy loading
def get_openai_client():
    if not hasattr(get_openai_client, 'client'):
        get_openai_client.client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))
    return get_openai_client.client

# Frontend lazy loading
const CoursePage = lazy(() => import('./pages/CoursePage'));
const TeacherDashboard = lazy(() => import('./pages/TeacherDashboard'));
```

#### **2. Caching Strategy**

```python
# Redis caching (planned)
@cache(expire=300)  # 5 minutes
async def get_courses():
    return await course_service.get_all_courses()

# Browser caching
Cache-Control: public, max-age=3600
ETag: "course-list-v1.2.3"
```

#### **3. Database Optimization**

```sql
-- Query optimization
EXPLAIN ANALYZE SELECT c.*, p.full_name
FROM courses c
JOIN profiles p ON c.teacher_id = p.id
WHERE c.status = 'active'
ORDER BY c.created_at DESC
LIMIT 20;

-- Connection pooling
max_connections = 100
shared_preload_libraries = 'pg_stat_statements'
```

---

## ğŸ“Š Monitoring & Observability

### **Monitoring Stack**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Monitoring Architecture                    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Application â”‚    â”‚   Database  â”‚    â”‚   System    â”‚    â”‚
â”‚  â”‚ Monitoring  â”‚    â”‚ Monitoring  â”‚    â”‚ Monitoring  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ API Metrics â”‚    â”‚ Query       â”‚    â”‚ Resource    â”‚    â”‚
â”‚  â”‚ â€¢ Response  â”‚    â”‚ Performance â”‚    â”‚ Usage       â”‚    â”‚
â”‚  â”‚ â€¢ Error     â”‚    â”‚ â€¢ Slow      â”‚    â”‚ â€¢ CPU       â”‚    â”‚
â”‚  â”‚ â€¢ Throughputâ”‚    â”‚ â€¢ Indexes   â”‚    â”‚ â€¢ Memory    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Alerts    â”‚    â”‚   Logs      â”‚    â”‚  Dashboards â”‚    â”‚
â”‚  â”‚ â€¢ Error     â”‚    â”‚ â€¢ Access    â”‚    â”‚ â€¢ Real-time â”‚    â”‚
â”‚  â”‚ â€¢ Performanceâ”‚   â”‚ â€¢ Audit     â”‚    â”‚ â€¢ Historicalâ”‚    â”‚
â”‚  â”‚ â€¢ Security  â”‚    â”‚ â€¢ Debug     â”‚    â”‚ â€¢ Custom    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Performance Metrics**

| Metric              | Target  | Current | Status                |
| ------------------- | ------- | ------- | --------------------- |
| API Response Time   | < 200ms | ~300ms  | âš ï¸ Needs optimization |
| Database Query Time | < 50ms  | ~100ms  | âš ï¸ Needs optimization |
| Frontend Load Time  | < 2s    | ~1.5s   | âœ… Good               |
| Server Startup      | < 5s    | ~3s     | âœ… Excellent          |
| Concurrent Users    | 100+    | 50+     | âš ï¸ Limited testing    |

---

## ğŸš€ Deployment Architecture

### **Production Deployment**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Production Environment                     â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   CDN       â”‚    â”‚   Load      â”‚    â”‚   App       â”‚    â”‚
â”‚  â”‚ (CloudFlare)â”‚    â”‚  Balancer   â”‚    â”‚  Servers    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Static      â”‚    â”‚ SSL         â”‚    â”‚ FastAPI     â”‚    â”‚
â”‚  â”‚ Assets      â”‚    â”‚ Termination â”‚    â”‚ Application â”‚    â”‚
â”‚  â”‚ â€¢ Images    â”‚    â”‚ â€¢ HTTPS     â”‚    â”‚ â€¢ Gunicorn  â”‚    â”‚
â”‚  â”‚ â€¢ CSS/JS    â”‚    â”‚ â€¢ HTTP/2    â”‚    â”‚ â€¢ Workers   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Redis     â”‚    â”‚  Supabase   â”‚    â”‚   Backup    â”‚    â”‚
â”‚  â”‚  Cache      â”‚    â”‚  Database   â”‚    â”‚   System    â”‚    â”‚
â”‚  â”‚ â€¢ Sessions  â”‚    â”‚ â€¢ PostgreSQLâ”‚    â”‚ â€¢ Daily     â”‚    â”‚
â”‚  â”‚ â€¢ API Cache â”‚    â”‚ â€¢ Storage   â”‚    â”‚ â€¢ Automated â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Development Environment**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Development Environment                      â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   React     â”‚    â”‚   FastAPI   â”‚    â”‚  Supabase   â”‚    â”‚
â”‚  â”‚ Development â”‚    â”‚ Development â”‚    â”‚ Development â”‚    â”‚
â”‚  â”‚ Server      â”‚    â”‚ Server      â”‚    â”‚ Project     â”‚    â”‚
â”‚  â”‚ :3000       â”‚    â”‚ :8000       â”‚    â”‚             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Hot Reload  â”‚    â”‚ Auto Reload â”‚    â”‚ Real-time   â”‚    â”‚
â”‚  â”‚ â€¢ CSS       â”‚    â”‚ â€¢ Python    â”‚    â”‚ Database    â”‚    â”‚
â”‚  â”‚ â€¢ JS        â”‚    â”‚ â€¢ API       â”‚    â”‚ â€¢ Changes   â”‚    â”‚
â”‚  â”‚ â€¢ Componentsâ”‚    â”‚ â€¢ Routes    â”‚    â”‚ â€¢ Sync      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Configuration Management

### **Environment Configuration**

```python
# settings.py
class Settings:
    # Application
    APP_NAME: str = "LearnSphere"
    DEBUG: bool = False

    # Database
    SUPABASE_URL: str
    SUPABASE_SERVICE_ROLE_KEY: str

    # Authentication
    JWT_SECRET_KEY: str
    JWT_ALGORITHM: str = "HS256"
    JWT_EXPIRATION_HOURS: int = 24

    # Email
    EMAIL_HOST: str
    EMAIL_PORT: int = 587
    EMAIL_USER: str
    EMAIL_PASS: str

    # File Upload
    MAX_FILE_SIZE: int = 50 * 1024 * 1024  # 50MB
    ALLOWED_FILE_TYPES: list = [".pdf", ".doc", ".docx", ".ppt", ".pptx"]

    # Performance
    CACHE_TTL: int = 300  # 5 minutes
    MAX_CONCURRENT_REQUESTS: int = 100
```

---

**Last Updated**: December 2024  
**Version**: 2.0.0  
**Architecture**: Three-tier with microservices pattern
